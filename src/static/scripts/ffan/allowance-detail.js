"use strict";var META={PWID:{label:"PWID"},mobile:{label:"账户手机号"},accountStatus:{label:"账户状态"},AccountResource:{label:"开户来源"},email:{label:"Email"},realNameLevel:{label:"实名认证等级"},idType:{label:"证件类型"},gender:{label:"性别"},id99bill:{label:"快钱会员ID"},payMobile:{label:"支付手机号"},openTime:{label:"开户时间"},openChannel:{label:"开户渠道"},accountName:{label:"姓名"},authenticationTime:{label:"认证时间"},idNumber:{label:"证件号码"},accountRegion:{label:"地区"}},TABLE_FIELDS=["id","name","email","age"],editData=function(e){window.location.href="allowance-detail.html?id="+e.id},submitData=function(e,a){console.log("2132131")},queryAcount=function(e){WUI.getResource("/edit");WUI.ajax({url:"/ams/v1/pocketMoney/query/accountDetailList",jsonData:{PWID:WUI.link().id,pageNum:e.currentPage,pageSize:e.pageSize}}).then(function(e){WUI.DataTable.create({$el:$("#account-table"),meta:{accountId:{label:"业务账户ID"},bizName:{label:"业务名称"},accountType:{label:"账户类型"},currentBalance:{label:"当前余额"},fromSource:{label:"来源"},openTime:{label:"开通时间"},accountStatus:{label:"状态"},bizType:{label:"业务类型",options:[{label:"购物金",value:"1"},{label:"储值",value:"2"},{label:"快易花",value:"3"}]}},fields:["bizName","accountType","currentBalance","fromSource","openTime","accountStatus"],list:e.accountDetailList,operations:[{name:"查看详情",callback:function(e){switch(e.accountType){case 1:var a=WUI.ModalDialog.create({title:"购物金账户详情",onConfirm:function(){a.hide()}});WUI.InfoTable.create({$el:$(".modal-body").addClass("info-table"),meta:{bizName:{label:"业务名称"},accountType:{label:"账户类型"},currentBalance:{label:"当前余额(元)"},fromSource:{label:"开通来源"},openTime:{label:"开通时间"},accountStatus:{label:"账户状态"},clearTime:{label:"账户清零时间"},clearMoney:{label:"账户清零金额(元)"}},data:e,fields:[["bizName","accountType","accountStatus","currentBalance","fromSource","openTime","clearTime","clearMoney"]]});break;case 2:var a=WUI.ModalDialog.create({title:"储值账户详情",onConfirm:function(){a.hide()}});WUI.InfoTable.create({$el:$(".modal-body").addClass("info-table"),meta:{bizName:{label:"业务名称"},accountType:{label:"账户类型"},currentBalance:{label:"当前余额(元)"},fromSource:{label:"开通来源"},openTime:{label:"开通时间"},accountStatus:{label:"账户状态"}},data:e,fields:[["bizName","accountType","accountStatus","currentBalance","fromSource","openTime"]]});break;case 3:var a=WUI.ModalDialog.create({title:"快易花帐户详情",onConfirm:function(){a.hide()}});WUI.InfoTable.create({$el:$(".modal-body").addClass("info-table"),meta:{accountId:{label:"零花钱账户ID"},accountStatus:{label:"账户状态"},applyProgress:{label:"申请进度"},applyTime:{label:"申请时间"},applyAmount:{label:"申请额度(元)"},usableAmount:{label:"可用额度(元)"},repayment:{label:"全部待还(元)"},frozenStatus:{label:"冻结状态"},frozenInfo:{label:"冻结信息提示"}},data:e,fields:[["accountId","accountStatus","frozenStatus","applyProgress","applyTime","applyAmount","usableAmount","repayment","frozenInfo"]]})}}}]})})},queryHistory=function(e){WUI.getResource("/edit");WUI.ajax({url:"/ams/v1/pocketMoney/query/accountOperateLog",jsonData:{PWID:WUI.link().id,pageNum:e.currentPage,pageSize:e.pageSize}}).then(function(a){WUI.DataTable.create({$el:$("#history-table"),meta:{operateTime:{label:"时间"},operater:{label:"操作人"},operateDesc:{label:"操作行为"},operateRemark:{label:"备注"}},fields:["operateTime","operater","operateDesc","operateRemark"],list:a.accountOperateLogList}),WUI.DataPaginator.create({$el:$("#history-paginator"),currentPage:e.currentPage,total:a.total,pageSize:e.pageSize,onSwitchPage:function(a){queryHistory({currentPage:a,pageSize:e.pageSize})}})})},queryCostList=function(){WUI.ajax({url:"/ams/v1/pocketMoney/query/paymentSetList",jsonData:{PWID:WUI.link().phone}}).then(function(e){WUI.InfoTable.create({$el:$("#payment-table"),meta:{paymentSet:{label:"小额免密"},amount:{label:"免密额度"}},data:e.paymentSetList,fields:[["paymentSet","amount"]]})})},queryTrade=function(e){WUI.getResource("/edit");WUI.ajax({url:"/ams/v1/pocketMoney/query/transactionList",jsonData:{PWID:WUI.link().id}}).then(function(a){WUI.DataTableEx.create({$el:$("#trade-table"),meta:{outOrderNum:{label:"外部订单号"},orderNum:{label:"交易订单号"},transType:{label:"交易类型"},transDesc:{label:"交易方向"},transResult:{label:"交易结果"},transAmount:{label:"交易金额"},transTime:{label:"交易时间"},toBank:{label:"流转银行"},cardType:{label:"卡类型"},toCard:{label:"流转卡号"},failReason:{label:"失败原因"}},fields:["outOrderNum","orderNum","transType","transDesc","transResult@failReason","transAmount","transTime","toBank","cardType","toCard"],list:a.transactionList}),WUI.DataPaginator.create({$el:$("#trade-paginator"),currentPage:e.currentPage,total:a.total,pageSize:e.pageSize,onSwitchPage:function(a){queryTrade({currentPage:a,pageSize:e.pageSize})}})})};WUI.ready=function(){WUI.ContentHeader.create({$el:$(".content-header"),meta:[{name:"首页",url:"/ams"},{name:"飞凡通业务"},{name:"零花钱 ",url:"allowance-list.html"},{name:"账户零花钱详情"}]}),WUI.ajax({url:"/ams/v1/pocketMoney/query/accountBaseInfo",jsonData:{PWID:WUI.link().id}}).done(function(e){var a=e.accountBaseInfo;WUI.getResource("/edit");$("#frozen-button").click(function(){WUI.ModalDialog.create({title:"提示",message:"确定要冻结此支付账户吗？",onConfirm:function(){console.log("delete data")}})}),WUI.InfoTable.create({$el:$("#account-info"),meta:META,data:a,fields:[["PWID","id99bill","mobile","email","accountRegion","accountStatus"],["accountName","gender","idType","idNumber","authenticationTime","realNameLevel"],["openTime","AccountResource","openChannel"]]}),queryAcount({currentPage:0,pageSize:20}),queryHistory({currentPage:0,pageSize:20}),queryTrade({currentPage:0,pageSize:10}),queryCostList()})},$(function(){WUI.init({system:"ams"})});
//# sourceMappingURL=allowance-detail.js.map
