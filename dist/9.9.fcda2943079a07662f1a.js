webpackJsonp([9],{8:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(15),r=l(n);r.default.Header=n.BoxHeader,r.default.Body=n.BoxBody,r.default.Footer=n.BoxFooter,t.default=r.default},9:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.inputTypes={TEXT:"INPUT_TYPE_TEXT",NUMBER:"INPUT_TYPE_NUMBER",EMAIL:"INPUT_TYPE_EMAIL",CHECKBOX:"INPUT_TYPE_CHECKBOX",PHONE:"INPUT_TYPE_PHONE",SELECT:"INPUT_TYPE_SELECT",MULTISELECT:"INPUT_TYPE_MULTISELECT",TREESELECT:"INPUT_TYPE_TREESELECT",DATE:"INPUT_TYPE_DATE",DATERANGE:"INPUT_TYPE_DATERANGE"}},15:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.BoxFooter=t.BoxBody=t.BoxHeader=void 0;var n=a(2),r=l(n),u=function(e){var t=e.children;return r.default.createElement("div",{className:"box"},t)};t.BoxHeader=function(e){var t=e.children;return r.default.createElement("div",{className:"box-header with-border"},t)},t.BoxBody=function(e){var t=e.children;return r.default.createElement("div",{className:"box-body"},t)},t.BoxFooter=function(e){var t=e.children;return r.default.createElement("div",{className:"box-footer"},t)};t.default=u},16:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(2),r=l(n),u=function(e){var t=e.children;return r.default.createElement("section",{className:"content"},t)};t.default=u},17:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(16),r=l(n);t.default=r.default},22:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(29),r=l(n),u=a(3),o=l(u),i=a(25),s=l(i),c=a(4),d=l(c),f=a(5),p=l(f),m=a(7),h=l(m),v=a(6),E=l(v),y=a(2),g=l(y),b=a(1),T=l(b),_=a(8),P=l(_),C=a(9),k=g.default.createElement("div",{className:"row text-center"},"没有数据"),S=function(e){function t(e){var a;(0,d.default)(this,t);var l=(0,h.default)(this,(a=t.__proto__||(0,o.default)(t)).call.apply(a,[this].concat((0,s.default)(e))));return l.state={selection:[]},l}return(0,E.default)(t,e),(0,p.default)(t,[{key:"componentWillReceiveProps",value:function(e){this.props.data.list!==e.data.list&&this.setState({selection:[]})}},{key:"toggleSelection",value:function(e,t){t.target.checked?this.state.selection.push(e):this.state.selection.splice(this.state.selection.indexOf(e),1),this.forceUpdate()}},{key:"selectAll",value:function(){for(var e=[],t=0;t<this.props.data.list.length;t++)e.push(t);this.setState({selection:e})}},{key:"clearAll",value:function(){this.setState({selection:[]})}},{key:"onButtonClick",value:function(e,t){e.confirm?this.props.onConfirm({message:e.confirm,onConfirm:e.callback.bind(null,t)}):e.callback(t)}},{key:"render",value:function(){var e=this,t=this.props,a=t.data,l=t.operations,n=t.groupOps;return g.default.createElement(P.default.Body,null,g.default.createElement("div",{className:"row",style:{overflow:"auto"}},g.default.createElement("table",{ref:"table",style:{margin:10,width:"98%",minWidth:800},className:"table table-bordered table-hover text-center table-responsive table-striped"},g.default.createElement("thead",null,g.default.createElement("tr",null,n&&g.default.createElement("th",{style:{width:50}},"选择"),a.tableFields.map(function(e,t){var l=a.meta[e]||{};return g.default.createElement("th",{style:{verticalAlign:"middle",width:l.width||"auto"},key:t},l.label)}),l&&g.default.createElement("th",{style:{verticalAlign:"middle",width:a.meta.operations?a.meta.operations.width||"auto":"auto"}},"操作"))),g.default.createElement("tbody",null,a.list.map(function(t,u){return g.default.createElement("tr",{key:u},n&&g.default.createElement("td",null,g.default.createElement("input",{type:"checkbox",checked:e.state.selection.indexOf(u)>=0,onChange:e.toggleSelection.bind(e,u)})),a.tableFields.map(function(e,l){var n=a.meta[e];if(n.display)return g.default.createElement("td",{key:l},n.display(t));if(n.type===C.inputTypes.SELECT){var u=n.options.find(function(a){return a.value===t[e]+""});return g.default.createElement("td",{key:l},u&&u.label)}if(n.type===C.inputTypes.MULTISELECT){var o="";return""!==t[e]&&(o=t[e].split(",").map(function(e){var t=n.options.find(function(t){return t.value+""===e});return t?t.label:""}).join(",")),g.default.createElement("td",{key:l},o)}if(n.type===C.inputTypes.TREESELECT){var i=t[e].split(",").map(function(e){var t=!0,a=!1,l=void 0;try{for(var u,o=(0,r.default)(n.options);!(t=(u=o.next()).done);t=!0){var i=u.value,s=!0,c=!1,d=void 0;try{for(var f,p=(0,r.default)(i.options);!(s=(f=p.next()).done);s=!0){var m=f.value;if(m.resourceID===e)return m.label;var h=!0,v=!1,E=void 0;try{for(var y,g=(0,r.default)(m.options);!(h=(y=g.next()).done);h=!0){var b=y.value;if(b.resourceId===e)return b.label}}catch(e){v=!0,E=e}finally{try{!h&&g.return&&g.return()}finally{if(v)throw E}}}}catch(e){c=!0,d=e}finally{try{!s&&p.return&&p.return()}finally{if(c)throw d}}}}catch(e){a=!0,l=e}finally{try{!t&&o.return&&o.return()}finally{if(a)throw l}}}).join(", ");return g.default.createElement("td",{key:l},i)}return n.type===C.inputTypes.DATE?t[e]?g.default.createElement("td",{key:l},(0,T.default)(t[e]).format("YYYY-MM-DD HH:mm:ss")):g.default.createElement("td",{key:l}):g.default.createElement("td",{key:l},t[e])}),l&&g.default.createElement("td",null,l.map(function(a,l){return g.default.createElement("a",{key:l,style:0===l?{cursor:"pointer"}:{marginLeft:"10px",cursor:"pointer"},onClick:e.onButtonClick.bind(e,a,t)},a.name)})))})))),g.default.createElement("div",{className:"row"},n&&g.default.createElement("label",{style:{float:"left",marginLeft:"30px",fontWeight:"normal"}},g.default.createElement("input",{type:"checkbox",style:{marginRight:"5px"},checked:this.state.selection.length===this.props.data.list.length,onChange:function(t){t.target.checked?e.selectAll():e.clearAll()}}),"全选"),n&&n.map(function(t,a){return g.default.createElement("div",{className:"col-sm-1 text-center",key:a},g.default.createElement("button",{className:"btn btn-xs btn-"+t.icon,disabled:0===e.state.selection.length,onClick:e.onButtonClick.bind(e,t,e.state.selection.map(function(t){return e.props.data.list[t]}))},t.name))})),0===a.list.length&&k)}}]),t}(g.default.Component);t.default=S},23:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(22),r=l(n);t.default=r.default},24:function(e,t,a){e.exports={default:a(26),__esModule:!0}},25:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var n=a(24),r=l(n);t.default=function(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return(0,r.default)(e)}},26:function(e,t,a){a(41),a(28),e.exports=a(14).Array.from},27:function(e,t,a){"use strict";var l=a(33),n=a(50);e.exports=function(e,t,a){t in e?l.f(e,t,n(0,a)):e[t]=a}},28:function(e,t,a){"use strict";var l=a(47),n=a(32),r=a(51),u=a(61),o=a(60),i=a(56),s=a(27),c=a(57);n(n.S+n.F*!a(62)(function(e){Array.from(e)}),"Array",{from:function(e){var t,a,n,d,f=r(e),p="function"==typeof this?this:Array,m=arguments.length,h=m>1?arguments[1]:void 0,v=void 0!==h,E=0,y=c(f);if(v&&(h=l(h,m>2?arguments[2]:void 0,2)),void 0==y||p==Array&&o(y))for(t=i(f.length),a=new p(t);t>E;E++)s(a,E,v?h(f[E],E):f[E]);else for(d=y.call(f),a=new p;!(n=d.next()).done;E++)s(a,E,v?u(d,h,[n.value,E],!0):n.value);return a.length=E,a}})},35:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(3),r=l(n),u=a(4),o=l(u),i=a(5),s=l(i),c=a(7),d=l(c),f=a(6),p=l(f),m=a(2),h=l(m),v=a(8),E=l(v),y=a(37),g=l(y),b=h.default.createElement("i",{className:"fa fa-fast-backward"}),T=h.default.createElement("i",{className:"fa fa-backward"}),_=h.default.createElement("i",{className:"fa fa-forward"}),P=h.default.createElement("i",{className:"fa fa-fast-forward"}),C=function(e){function t(){return(0,o.default)(this,t),(0,d.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,p.default)(t,e),(0,s.default)(t,[{key:"nextPage",value:function(){var e=this.calParams(this.props.data),t=e.currentPage,a=e.totalPage;t<a-1&&this.props.onSwitch(t+1)}},{key:"prevPage",value:function(){var e=this.calParams(this.props.data),t=e.currentPage;t>0&&this.props.onSwitch(t-1)}},{key:"firstPage",value:function(){var e=this.calParams(this.props.data),t=e.currentPage;0!==t&&this.props.onSwitch(0)}},{key:"lastPage",value:function(){var e=this.calParams(this.props.data),t=e.currentPage,a=e.totalPage;t!==a-1&&this.props.onSwitch(a-1)}},{key:"switchPage",value:function(e){var t=this.calParams(this.props.data),a=t.currentPage;a!==e&&this.props.onSwitch(e)}},{key:"calParams",value:function(e){var t=e.total,a=e.currentPage,l=e.pageSize,n=a*l+1,r=(e.currentPage+1)*e.pageSize,u=t%l?parseInt(t/l,10)+1:parseInt(t/l,10),o=r>t?t:r;return{start:n,end:o,total:t,currentPage:a,pageSize:l,totalPage:u}}},{key:"calPaginators",value:function(e,t){var a=[];if(e>9)if(t<5)for(var l=0;l<9;l++)a.push(l);else if(t>e-5)for(var n=0;n<9;n++)a.push(e-9+n);else for(var r=0;r<9;r++)a.push(t-4+r);else for(var u=0;u<e;u++)a.push(u);return a}},{key:"render",value:function(){var e=this,t=this.props.data,a=this.calParams(t),l=a.start,n=a.end,r=a.total,u=a.currentPage,o=a.totalPage,i=this.calPaginators(o,u);return 0===r?null:h.default.createElement(E.default.Footer,null,h.default.createElement("div",{className:"row",style:{lineHeight:"35px"}},h.default.createElement("div",{className:"col-sm-5"},"当前显示 ",l," 到 ",n," 条，共 ",r," 条"),h.default.createElement("div",{className:"col-sm-7"},h.default.createElement("ul",{className:"pagination pagination-sm pull-right",style:{margin:0}},o>1?h.default.createElement("li",{className:0===u&&"disabled",onClick:this.firstPage.bind(this)},h.default.createElement("a",{className:g.default.paginator},b)):null,o>1?h.default.createElement("li",{className:0===u&&"disabled",onClick:this.prevPage.bind(this)},h.default.createElement("a",{className:g.default.paginator},T)):null,i.map(function(t,a){return h.default.createElement("li",{key:a,className:u===t&&"active",onClick:e.switchPage.bind(e,t)},h.default.createElement("a",{className:g.default.paginator},t+1))}),o>1?h.default.createElement("li",{className:u===o-1&&"disabled",onClick:this.nextPage.bind(this)},h.default.createElement("a",{className:g.default.paginator},_)):null,o>1?h.default.createElement("li",{className:u===o-1&&"disabled",onClick:this.lastPage.bind(this)},h.default.createElement("a",{className:g.default.paginator},P)):null))))}}]),t}(h.default.Component);t.default=C},36:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(35),r=l(n);t.default=r.default},37:function(e,t){e.exports={paginator:"DataPaginator__paginator___1cn8c"}},42:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(68),r=l(n),u=a(3),o=l(u),i=a(4),s=l(i),c=a(5),d=l(c),f=a(7),p=l(f),m=a(6),h=l(m),v=a(2),E=l(v),y=a(1),g=l(y),b=a(54),T=l(b),_=a(13),P=a(9),C=E.default.createElement("p",{className:"form-control"},"点击选择日期"),k=function(e){function t(){return(0,s.default)(this,t),(0,p.default)(this,(t.__proto__||(0,o.default)(t)).apply(this,arguments))}return(0,h.default)(t,e),(0,d.default)(t,[{key:"changeItem",value:function(e,t){this.props.onUpdate({field:e,value:t.target.value})}},{key:"changeOption",value:function(e,t,a,l){var n=this.props.item,r=n[e]?n[e].split(","):[];l.target.checked?(r.indexOf(t.value+"")===-1&&r.push(t.value+""),a&&r.indexOf(a.value+"")===-1&&r.push(a.value),t.options&&t.options.forEach(function(e){r.indexOf(e.value+"")===-1&&r.push(e.value+"")})):t.options?(r.splice(r.indexOf(t.value+""),1),t.options.forEach(function(e){r.indexOf(e.value+"")>-1&&r.splice(r.indexOf(e.value+""),1)})):r.splice(r.indexOf(t.value+""),1),this.props.onUpdate({field:e,value:r.join(",")})}},{key:"setDate",value:function(e,t,a){this.props.onUpdate({field:e.startField,value:a.startDate.format("YYYY-MM-DD")}),this.props.onUpdate({field:e.endField,value:a.endDate.format("YYYY-MM-DD")})}},{key:"clearDate",value:function(e,t,a){console.log("cancel clicked"),this.props.onUpdate({field:e.startField,value:null}),this.props.onUpdate({field:e.endField,value:null}),a.startDate=(0,g.default)(),a.endDate=(0,g.default)()}},{key:"inputComponent",value:function(e,t){var a=this,l=this.props,n=l.item,u=l.showType,o=void 0===u?_.showTypes.CREATE:u,i={applyLabel:"确定",cancelLabel:"取消",daysOfWeek:["日","一","二","三","四","五","六"],monthNames:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],format:"YYYY-MM-DD",separator:" - ",fromLabel:"起始",toLabel:"终止",customRangeLabel:"自定义",weekLabel:"W",firstDay:1},s=function(){switch(e.type){case P.inputTypes.DATERANGE:return{v:E.default.createElement(T.default,{locale:i,maxDate:e.maxDate||null,onApply:a.setDate.bind(a,e),onCancel:a.clearDate.bind(a,e)},n[e.startField]?E.default.createElement("p",{className:"form-control"},n[e.startField]," ~ ",n[e.endField]):C)};case P.inputTypes.TREESELECT:var l=n[t]?n[t].split(","):[];return{v:E.default.createElement("div",{className:"box-body"},e.options.map(function(e,n){return E.default.createElement("div",{key:n},E.default.createElement("div",{className:"box-header"},E.default.createElement("label",null,E.default.createElement("input",{type:"checkbox",disabled:o===_.showTypes.VIEW,checked:l.indexOf(e.value+"")>=0,onChange:a.changeOption.bind(a,t,e,null)})," ",e.label)),e.options.length>0?E.default.createElement("div",{className:"box-body checkbox"},e.options.map(function(n,r){return E.default.createElement("label",{className:"col-sm-4",key:r},E.default.createElement("input",{type:"checkbox",disabled:o===_.showTypes.VIEW,checked:l.indexOf(n.value+"")>=0,onChange:a.changeOption.bind(a,t,n,e)}),n.label)})):null)}))};case P.inputTypes.SELECT:return{v:E.default.createElement("select",{className:"form-control",disabled:o===_.showTypes.VIEW||o===_.showTypes.UPDATE&&e.readOnly,id:t,value:n[t]||(e.options[0]?e.options[0].value:""),onChange:a.changeItem.bind(a,t)},e.options.map(function(e,t){return E.default.createElement("option",{key:t,value:e.value},e.label)}))};case P.inputTypes.MULTISELECT:console.log("item[field]",n[t]);var r=n[t]?n[t].split(","):[];return{v:E.default.createElement("div",{className:"row"},e.options.map(function(e,l){return E.default.createElement("div",{key:l,className:"checkbox col-sm-4"},E.default.createElement("label",null,E.default.createElement("input",{type:"checkbox",disabled:o===_.showTypes.VIEW,checked:r.indexOf(e.value+"")>=0,onChange:a.changeOption.bind(a,t,e,null)}),e.label))}))};case P.inputTypes.CHECKBOX:return{v:E.default.createElement("div",{className:"checkbox"},E.default.createElement("label",null,E.default.createElement("input",{type:"checkbox",id:t,checked:e.value,onChange:a.changeItem.bind(a,e)}),e.name))};case P.inputTypes.PHONE:return{v:E.default.createElement("input",{type:"text",className:"form-control",id:t,required:e.required,disabled:o===_.showTypes.VIEW,value:n[t]||"",onChange:a.changeItem.bind(a,t),placeholder:e.label})};case P.inputTypes.EMAIL:return{v:E.default.createElement("input",{type:"email",className:"form-control",id:t,required:e.required,maxLength:e.maxLength,disabled:o===_.showTypes.VIEW,value:n[t]||"",onChange:a.changeItem.bind(a,t),placeholder:e.label})};case P.inputTypes.TEXT:default:return{v:E.default.createElement("input",{type:"text",className:"form-control",id:t,required:e.required,maxLength:e.maxLength,disabled:o===_.showTypes.VIEW,value:n[t]||"",onChange:a.changeItem.bind(a,t),placeholder:e.label})}}}();if("object"===("undefined"==typeof s?"undefined":(0,r.default)(s)))return s.v}},{key:"render",value:function(){var e=this,t=this.props,a=t.fields,l=void 0===a?[]:a,n=t.meta,r=(t.item,t.onUpdate,t.columns),u="";switch(r){case 2:u="col-sm-6";break;case 3:u="col-sm-4";break;case 4:u="col-sm-3"}return E.default.createElement("div",{className:"box-body"},l.map(function(t,a){var l=n[t];return 0===r?E.default.createElement("div",{className:"form-group",key:a},E.default.createElement("label",{className:"control-label col-sm-2",htmlFor:t},l.label),E.default.createElement("div",{className:"col-sm-10"},e.inputComponent(l,t))):E.default.createElement("div",{className:"form-group "+u,key:a},E.default.createElement("label",{htmlFor:t},l.label),e.inputComponent(l,t))}),this.props.children)}}]),t}(E.default.Component);t.default=k},43:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(42),r=l(n);t.default=r.default},58:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(3),r=l(n),u=a(4),o=l(u),i=a(5),s=l(i),c=a(7),d=l(c),f=a(6),p=l(f),m=a(2),h=l(m),v=a(8),E=l(v),y=a(43),g=l(y),b=h.default.createElement("label",null),T=h.default.createElement("label",null),_=function(e){function t(){return(0,o.default)(this,t),(0,d.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,p.default)(t,e),(0,s.default)(t,[{key:"changeFilter",value:function(e,t){this.props.onChange({field:e,value:t.target.value})}},{key:"render",value:function(){var e=this.props,t=e.data,a=t.meta,l=t.filterFields,n=t.currentFilter,r=e.onCreate,u=e.onFilter,o=e.onChange;return h.default.createElement(E.default.Header,null,h.default.createElement(g.default,{columns:4,fields:l,meta:a,item:n,onUpdate:o},h.default.createElement("div",{className:"row col-sm-12"},u&&h.default.createElement("div",{className:"col-sm-1"},b,h.default.createElement("input",{type:"button",style:{marginTop:"5px"},className:"btn btn-info ",onClick:u,value:this.props.filterText||"查询"})),r&&h.default.createElement("div",{className:"col-sm-1"},T,h.default.createElement("input",{type:"button",style:{marginTop:"5px"},className:"btn btn-primary",onClick:r,value:this.props.createText||"新增"})))))}}]),t}(h.default.Component);t.default=_},59:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(58),r=l(n);t.default=r.default},190:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments[1],a=X[t.type];return a?a(e,t):e}Object.defineProperty(t,"__esModule",{value:!0}),t.resetItem=t.updateItem=t.updateFilter=t.switchPageStart=t.switchPage=t.deleteData=t.updateData=t.createData=t.queryChangeUpload=t.queryData=void 0;var r,u=a(30),o=l(u),i=a(20),s=l(i),c=a(46),d=l(c);t.default=n;var f=a(2),p=l(f),m=a(1),h=l(m),v=a(39),E=l(v),y=a(49),g=l(y),b=a(9),T={0:"创建",1:"正常",2:"冻结",8:"已合并",9:"注销"},_=p.default.createElement("i",{className:"glyphicon glyphicon-time"}),P={createTime:{label:"创建时间",type:b.inputTypes.DATE,width:"20%"},operator:{label:"创建人",width:"20%"},PWID:{label:"PWID",width:"20%"},account:{label:"会员帐号",display:function(e){return p.default.createElement("div",null,e.mobile&&p.default.createElement("p",null,e.mobile),e.email&&p.default.createElement("p",null,e.email))},width:"20%"},newAcctStatus:{label:"当前状态",type:b.inputTypes.SELECT,display:function(e){return p.default.createElement("div",null,T[e.newAcctStatus],p.default.createElement("a",{tabIndex:"0","data-toggle":"tooltip","data-placement":"bottom",title:"原状态:  "+T[e.acctStatus],"data-content":T[e.acctStatus]},_))},options:[{label:"正常",value:"1"},{label:"冻结",value:"2"},{label:"注销",value:"9"}],width:"20%"},range:{label:"起止日期",type:b.inputTypes.DATERANGE,startField:"startProcessTime",endField:"endProcessTime",maxDate:(0,h.default)()}},C={meta:P,filterFields:["range","PWID","account"],tableFields:["createTime","operator","PWID","account","newAcctStatus"],list:[],total:0,pageSize:20,currentPage:0,currentItem:{},currentFilter:{}},k="QUERY_STATUS_BATCH",S="QUERY_STATUS_BATCH_SUCCESS",w="CREATE_STATUS_BATCH",N="CREATE_STATUS_BATCH_SUCCESS",x="UPDATE_STATUS_BATCH",A="UPDATE_STATUS_BATCH_SUCCESS",D="DELETE_STATUS_BATCH",M="DELETE_STATUS_BATCH_SUCCESS",I="UPDATE_STATUS_BATCH_FILTER",O="UPDATE_STATUS_BATCH_ITEM",U="RESET_STATUS_BATCH_ITEM",F="SWITCH_STATUS_BATCH_PAGE",L=function(){return{type:k}},B=function(e){return{type:S,payload:e}},H=function(){return{type:w}},Y=function(){return{type:N}},j=function(){return{type:x}},R=function(){return{type:A}},W=function(){return{type:D}},q=function(){return{type:M}},V=t.queryData=function(){return function(e,t){var a=t()["status-batch"].currentFilter,l=t()["status-batch"];return e(L()),new d.default(function(t){(0,g.default)(E.default.ams+"/ams/v1/workOrder/query/operationLog",{method:"POST",jsonData:{startCreateTime:a.startProcessTime,endCreateTime:a.endProcessTime,QueryType:20,PWID:a.PWID?a.PWID.replace(/(^\s*)|(\s*$)/g,""):null,loginName:a.account,pageNum:l.currentPage,pageSize:l.pageSize}}).then(function(t){e(B({list:t.workOrders,total:t.totalNum}))})})}},z=(t.queryChangeUpload=function(e){return function(t,a){t(L()),(0,g.default)(E.default.ams+"/ams/v1/workOrder/update/woAcctStatusChangeFile",{method:"POST",jsonData:{fileId:e,operationAction:10}}).then(function(e){})}},t.createData=function(){return function(e,t){return e(H()),new d.default(function(t){setTimeout(function(){e(Y()),t()},1e3)})}},t.updateData=function(){return function(e,t){return e(j()),new d.default(function(t){setTimeout(function(){e(R()),t()},1e3)})}},t.deleteData=function(){return function(e,t){return e(W()),new d.default(function(t){setTimeout(function(){e(q()),t()},1e3)})}},t.switchPage=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return function(t,a){t(z(e)),setTimeout(function(){t(V())},0)}},t.switchPageStart=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return{type:F,payload:e}}),X=(t.updateFilter=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:I,payload:e}},t.updateItem=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:O,payload:e}},t.resetItem=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{type:U,payload:e}},r={},(0,o.default)(r,S,function(e,t){return(0,s.default)({},e,t.payload)}),(0,o.default)(r,w,function(e,t){return(0,s.default)({},e,{success:!0})}),(0,o.default)(r,N,function(e,t){return(0,s.default)({},e,{success:!0})}),(0,o.default)(r,F,function(e,t){return(0,s.default)({},e,{currentPage:t.payload})}),(0,o.default)(r,I,function(e,t){var a=(0,s.default)({},e.currentFilter);return a[t.payload.field]=t.payload.value,(0,s.default)({},e,{currentFilter:a})}),(0,o.default)(r,O,function(e,t){var a=(0,s.default)({},e.currentItem);return a[t.payload.field]=t.payload.value,(0,s.default)({},e,{currentItem:a})}),(0,o.default)(r,U,function(e,t){return(0,s.default)({},e,{currentItem:t.payload,success:!1})}),r)},423:function(e,t,a){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(3),r=l(n),u=a(4),o=l(u),i=a(5),s=l(i),c=a(7),d=l(c),f=a(6),p=l(f),m=a(2),h=l(m),v=a(64),E=l(v),y=a(17),g=l(y),b=a(8),T=l(b),_=a(59),P=l(_),C=a(23),k=l(C),S=a(36),w=l(S),N=a(39),x=l(N),A=a(45),D=h.default.createElement("a",{href:"/templates/Sample.xlsx"},"下载文件模板"),M=function(e){function t(){return(0,o.default)(this,t),(0,d.default)(this,(t.__proto__||(0,r.default)(t)).apply(this,arguments))}return(0,p.default)(t,e),(0,s.default)(t,[{key:"componentWillMount",value:function(){this.props.queryData()}},{key:"selectFile",value:function(){var e=$(E.default.findDOMNode(this.refs["file-input"]));e.click()}},{key:"uploadFile",value:function(e){var t=this,a=e.target.files[0],l=new FormData;l.append("file",a),$.ajax({url:x.default.ams+"/ams/v1/workOrder/upload/woacctstatuschangefile",data:l,method:"POST",dataType:"json",cache:!1,contentType:!1,processData:!1}).done(function(e){if("AMS-10000"===e.respHeader.respCode||"AAS-10000"===e.respHeader.respCode){var a=e.woAcctStatusChangeFiles[0].fileID,l="/ams/v1/workOrder/download/woAcctStatusChangeFile?fileId="+a;t.props.showConfirm({message:"共上传<strong>"+e.uploadTotal+"</strong>条数据，\n                 其中<strong>"+e.effectiveNumber+"</strong>条数据有效，\n                 <a href="+l+' target="数据明细">查看明细</a>',onConfirm:function(){return t.props.queryChangeUpload(e.woAcctStatusChangeFiles[0].fileID)}})}else t.props.showConfirm({message:""+e.respHeader.respMessage})}).fail(function(e){t.props.showConfirm({message:""+e.message})}),e.target.value=""}},{key:"render",value:function(){var e=(0,A.checkResources)(this.props),t=(e.canQuery,e.canModify,(0,A.getResource)(this.props,"/modify")),a=(0,A.getResource)(this.props,"/query");return t?h.default.createElement(g.default,null,h.default.createElement(T.default,null,h.default.createElement(P.default,{data:this.props.data,onFilter:a&&this.props.switchPage.bind(null,0),onChange:this.props.updateFilter}),h.default.createElement(T.default.Header,null,h.default.createElement("div",{className:"box-body"},t&&h.default.createElement("div",{className:"col-sm-3"},h.default.createElement("button",{className:"btn btn-primary btn-block",onClick:this.selectFile.bind(this)},"上传变更数据"),h.default.createElement("input",{ref:"file-input",type:"file",accept:".xlsx",onChange:this.uploadFile.bind(this),className:"hidden"})),h.default.createElement("div",{className:"col-sm-6"},h.default.createElement("p",{style:{color:"#a1a1a1"}},"仅支持excel文件，请参考模板整理数据 ",D)))),h.default.createElement(k.default,{data:this.props.data,onConfirm:this.props.showConfirm}),h.default.createElement(w.default,{data:this.props.data,onSwitch:this.props.switchPage}))):h.default.createElement(g.default,null,h.default.createElement(T.default,null,h.default.createElement(P.default,{data:this.props.data,onFilter:a&&this.props.switchPage.bind(null,0),onChange:this.props.updateFilter}),h.default.createElement(k.default,{data:this.props.data,onConfirm:this.props.showConfirm}),h.default.createElement(w.default,{data:this.props.data,onSwitch:this.props.switchPage})))}}]),t}(h.default.Component);t.default=M},424:function(e,t,a){"use strict";function l(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(31),u=n(r),o=a(34),i=a(19),s=l(i),c=a(13),d=l(c),f=a(190),p=l(f),m=a(423),h=n(m),v=(0,u.default)({},s,d,p),E=function(e){return{data:e["status-batch"],resources:e.administrator.resources,popups:e.popups}};t.default=(0,o.connect)(E,v)(h.default)}});